const imageConfig={plomberie:{images:[{filename:"salle-de-bain1.webp",caption:"Installation compl\xE8te d'une salle de bain moderne"},{filename:"avant1.webp",caption:"Salle de bain avant travaux"},{filename:"apres1.webp",caption:"Salle de bain apr\xE8s travaux"}]},interieur:{images:[{filename:"cuisine1.webp",caption:"Cuisine avec pose de verri\xE8re"},{filename:"interieur1.webp",caption:"Cr\xE9ation de cloisons et pose de sol"},{filename:"placo1.webp",caption:"Pose de placo"}]},exterieur:{images:[{filename:"terrasse-bois1.webp",caption:"Terrasse en bois sur mesure"},{filename:"ravalement1.webp",caption:"Ravalement de fa\xE7ade"},{filename:"ravalement2.webp",caption:"Ravalement de fa\xE7ade"}]}};function loadCarouselImages(e){if(!imageConfig[e]){console.error(`Configuration non trouv\xE9e pour le carrousel ${e}`);return}const i=document.querySelector(`#${e} .carousel`),c=i.querySelector(".carousel-track"),a=document.getElementById("lightbox"),s=a.querySelector(".lightbox-content"),l=a.querySelector(".lightbox-caption");c.innerHTML="",imageConfig[e].images.forEach((o,r)=>{const n=document.createElement("img");n.src=`images/${e}/${o.filename}`,n.alt=o.caption,r===0?(n.loading="eager",e==="plomberie"&&(n.fetchPriority="high")):n.loading="lazy",n.dataset.caption=o.caption,n.setAttribute("width","1600"),n.setAttribute("height","900"),n.style.aspectRatio="16/9",n.onclick=()=>{s.src=n.src,l.textContent=o.caption,a.classList.add("active")},c.appendChild(n)}),initCarousel(i)}function initCarousel(e){const i=e.querySelector(".carousel-track"),c=e.querySelector(".carousel-nav.prev"),a=e.querySelector(".carousel-nav.next"),s=i.querySelectorAll("img");let l=0;function o(){const r=-l*100;i.style.transform=`translateX(${r}%)`}c.addEventListener("click",()=>{l=(l-1+s.length)%s.length,o()}),a.addEventListener("click",()=>{l=(l+1)%s.length,o()}),o()}document.addEventListener("DOMContentLoaded",()=>{loadCarouselImages("plomberie"),loadCarouselImages("interieur"),loadCarouselImages("exterieur");let e=null,i=0;document.querySelectorAll(".carousel img").forEach(c=>{c.onclick=()=>{const a=c.closest(".carousel");e=a.closest("[id]").id,i=Array.from(a.querySelectorAll("img")).indexOf(c),updateLightboxImage(),lightbox.classList.add("active")}}),initFloatingButton(),initLightbox()});function initFloatingButton(){const e=document.querySelector(".floating-contact-btn");window.addEventListener("scroll",()=>{const i=window.scrollY;e.classList.toggle("visible",i>200)})}function initLightbox(){const e=document.getElementById("lightbox"),i=document.getElementById("lightbox-img"),c=document.querySelector(".lightbox-caption"),a=document.querySelector(".lightbox-close"),s=document.querySelector(".lightbox-prev"),l=document.querySelector(".lightbox-next");let o=null,r=0;function n(){const t=o.querySelectorAll("img");i.src=t[r].src,c.textContent=t[r].alt}function m(t){e.classList.toggle("active",t),document.body.style.overflow=t?"hidden":""}document.querySelectorAll(".carousel").forEach(t=>{t.querySelectorAll("img").forEach((p,b)=>{p.addEventListener("click",()=>{o=t,r=b,n(),m(!0)})})});function u(t){const g=o.querySelectorAll("img");r=(r+t+g.length)%g.length,n()}s.addEventListener("click",t=>{t.stopPropagation(),u(-1)}),l.addEventListener("click",t=>{t.stopPropagation(),u(1)});function d(){m(!1)}a.addEventListener("click",d),e.addEventListener("click",t=>{t.target===e&&d()}),document.addEventListener("keydown",t=>{if(e.classList.contains("active"))switch(t.key){case"Escape":d();break;case"ArrowLeft":u(-1);break;case"ArrowRight":u(1);break}})}

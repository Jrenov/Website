const imageConfig={plomberie:{images:[{filename:"salle-de-bain1.webp",caption:"Installation compl\xE8te d'une salle de bain moderne"},{filename:"avant1.webp",caption:"Salle de bain avant travaux"},{filename:"apres1.webp",caption:"Salle de bain apr\xE8s travaux"}]},interieur:{images:[{filename:"cuisine1.webp",caption:"Cuisine avec pose de verri\xE8re"},{filename:"interieur1.webp",caption:"Cr\xE9ation de cloisons et pose de sol"},{filename:"placo1.webp",caption:"Pose de placo"}]},exterieur:{images:[{filename:"terrasse-bois1.webp",caption:"Terrasse en bois sur mesure"},{filename:"ravalement1.webp",caption:"Ravalement de fa\xE7ade"},{filename:"ravalement2.webp",caption:"Ravalement de fa\xE7ade"}]}};function loadCarouselImages(e){if(!imageConfig[e]){console.error(`Configuration non trouv\xE9e pour le carrousel ${e}`);return}const c=document.querySelector(`#${e} .carousel`),i=c.querySelector(".carousel-track"),l=document.getElementById("lightbox"),r=l.querySelector(".lightbox-content"),a=l.querySelector(".lightbox-caption");i.innerHTML="",imageConfig[e].images.forEach((n,s)=>{const o=document.createElement("img");o.src=`images/${e}/${n.filename}`,o.alt=n.caption,o.loading="lazy",o.dataset.caption=n.caption,o.classList.add("w-full","flex-shrink-0","object-cover"),o.style.aspectRatio="16/9",o.onclick=()=>{r.src=o.src,a.textContent=n.caption,l.classList.add("active")},i.appendChild(o)}),initCarousel(c)}function initCarousel(e){const c=e.querySelector(".carousel-track"),i=e.querySelector(".carousel-nav.prev"),l=e.querySelector(".carousel-nav.next"),r=c.querySelectorAll("img");let a=0;function n(){const s=-a*100;c.style.transform=`translateX(${s}%)`}i.addEventListener("click",()=>{a=(a-1+r.length)%r.length,n()}),l.addEventListener("click",()=>{a=(a+1)%r.length,n()}),n()}document.addEventListener("DOMContentLoaded",()=>{loadCarouselImages("plomberie"),loadCarouselImages("interieur"),loadCarouselImages("exterieur");let e=null,c=0;document.querySelectorAll(".carousel img").forEach(i=>{i.onclick=()=>{const l=i.closest(".carousel");e=l.closest("[id]").id,c=Array.from(l.querySelectorAll("img")).indexOf(i),updateLightboxImage(),lightbox.classList.add("active")}}),initFloatingButton(),initLightbox()});function initFloatingButton(){const e=document.querySelector(".floating-contact-btn");window.addEventListener("scroll",()=>{const c=window.scrollY;e.classList.toggle("visible",c>200)})}function initLightbox(){const e=document.getElementById("lightbox"),c=document.getElementById("lightbox-img"),i=document.querySelector(".lightbox-caption"),l=document.querySelector(".lightbox-close"),r=document.querySelector(".lightbox-prev"),a=document.querySelector(".lightbox-next");let n=null,s=0;function o(){const t=n.querySelectorAll("img");c.src=t[s].src,i.textContent=t[s].alt}function m(t){e.classList.toggle("active",t),document.body.style.overflow=t?"hidden":""}document.querySelectorAll(".carousel").forEach(t=>{t.querySelectorAll("img").forEach((p,b)=>{p.addEventListener("click",()=>{n=t,s=b,o(),m(!0)})})});function u(t){const g=n.querySelectorAll("img");s=(s+t+g.length)%g.length,o()}r.addEventListener("click",t=>{t.stopPropagation(),u(-1)}),a.addEventListener("click",t=>{t.stopPropagation(),u(1)});function d(){m(!1)}l.addEventListener("click",d),e.addEventListener("click",t=>{t.target===e&&d()}),document.addEventListener("keydown",t=>{if(e.classList.contains("active"))switch(t.key){case"Escape":d();break;case"ArrowLeft":u(-1);break;case"ArrowRight":u(1);break}})}
